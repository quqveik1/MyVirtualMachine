File listing Pass #1: Code -> Intermediate Representation

0000 | #1 | commandNum: 0002; isFinal: 1; labelLinePos: -001; | 02 00 00 00                                       | in
0001 | #1 | commandNum: 0000; isFinal: 1; labelLinePos: -001; |                                                   | 
0002 | #1 | commandNum: 0010; isFinal: 1; labelLinePos: -001; | 0a 01 00 00                                       | jmp main
0003 | #1 | commandNum: 0000; isFinal: 1; labelLinePos: -001; |                                                   | 
0004 | #1 | commandNum: 0019; isFinal: 1; labelLinePos: 0004; |                                                   | fib:
0005 | #1 | commandNum: 0000; isFinal: 1; labelLinePos: -001; |                                                   | 
0006 | #1 | commandNum: 0009; isFinal: 1; labelLinePos: -001; | 09 02 00 00 64 00 00 00                           | pop bx
0007 | #1 | commandNum: 0004; isFinal: 1; labelLinePos: -001; | 04 02 00 00 64 00 00 00                           | push bx
0008 | #1 | commandNum: 0004; isFinal: 1; labelLinePos: -001; | 04 02 00 00 64 00 00 00                           | push bx
0009 | #1 | commandNum: 0004; isFinal: 1; labelLinePos: -001; | 04 01 00 00 00 00 00 00                           | push 0
0010 | #1 | commandNum: 0011; isFinal: 1; labelLinePos: -001; | 0b 01 00 00                                       | ja checkRet1
0011 | #1 | commandNum: 0009; isFinal: 1; labelLinePos: -001; | 09 02 00 00 64 00 00 00                           | pop bx
0012 | #1 | commandNum: 0004; isFinal: 1; labelLinePos: -001; | 04 01 00 00 00 00 00 00                           | push 0
0013 | #1 | commandNum: 0021; isFinal: 1; labelLinePos: -001; | 15 00 00 00                                       | ret
0014 | #1 | commandNum: 0000; isFinal: 1; labelLinePos: -001; |                                                   | 
0015 | #1 | commandNum: 0019; isFinal: 1; labelLinePos: 0015; |                                                   | checkRet1:
0016 | #1 | commandNum: 0009; isFinal: 1; labelLinePos: -001; | 09 02 00 00 64 00 00 00                           | pop bx
0017 | #1 | commandNum: 0004; isFinal: 1; labelLinePos: -001; | 04 02 00 00 64 00 00 00                           | push bx
0018 | #1 | commandNum: 0004; isFinal: 1; labelLinePos: -001; | 04 02 00 00 64 00 00 00                           | push bx
0019 | #1 | commandNum: 0004; isFinal: 1; labelLinePos: -001; | 04 01 00 00 64 00 00 00                           | push 1
0020 | #1 | commandNum: 0016; isFinal: 1; labelLinePos: -001; | 10 01 00 00                                       | jne prev
0021 | #1 | commandNum: 0019; isFinal: 1; labelLinePos: 0021; |                                                   | ret1:
0022 | #1 | commandNum: 0009; isFinal: 1; labelLinePos: -001; | 09 02 00 00 64 00 00 00                           | pop bx
0023 | #1 | commandNum: 0004; isFinal: 1; labelLinePos: -001; | 04 01 00 00 64 00 00 00                           | push 1
0024 | #1 | commandNum: 0021; isFinal: 1; labelLinePos: -001; | 15 00 00 00                                       | ret
0025 | #1 | commandNum: 0000; isFinal: 1; labelLinePos: -001; |                                                   | 
0026 | #1 | commandNum: 0019; isFinal: 1; labelLinePos: 0026; |                                                   | prev:
0027 | #1 | commandNum: 0000; isFinal: 1; labelLinePos: -001; |                                                   | 
0028 | #1 | commandNum: 0009; isFinal: 1; labelLinePos: -001; | 09 02 00 00 64 00 00 00                           | pop bx
0029 | #1 | commandNum: 0004; isFinal: 1; labelLinePos: -001; | 04 02 00 00 64 00 00 00                           | push bx
0030 | #1 | commandNum: 0004; isFinal: 1; labelLinePos: -001; | 04 02 00 00 64 00 00 00                           | push bx
0031 | #1 | commandNum: 0004; isFinal: 1; labelLinePos: -001; | 04 01 00 00 9c ff ff ff                           | push -1
0032 | #1 | commandNum: 0005; isFinal: 1; labelLinePos: -001; | 05 00 00 00                                       | add
0033 | #1 | commandNum: 0020; isFinal: 1; labelLinePos: 0004; | 14 01 00 00                                       | call fib
0034 | #1 | commandNum: 0000; isFinal: 1; labelLinePos: -001; |                                                   | 
0035 | #1 | commandNum: 0009; isFinal: 1; labelLinePos: -001; | 09 02 00 00 c8 00 00 00                           | pop cx
0036 | #1 | commandNum: 0009; isFinal: 1; labelLinePos: -001; | 09 02 00 00 64 00 00 00                           | pop bx
0037 | #1 | commandNum: 0004; isFinal: 1; labelLinePos: -001; | 04 02 00 00 c8 00 00 00                           | push cx
0038 | #1 | commandNum: 0000; isFinal: 1; labelLinePos: -001; |                                                   | 
0039 | #1 | commandNum: 0004; isFinal: 1; labelLinePos: -001; | 04 02 00 00 64 00 00 00                           | push bx
0040 | #1 | commandNum: 0004; isFinal: 1; labelLinePos: -001; | 04 01 00 00 38 ff ff ff                           | push -2
0041 | #1 | commandNum: 0005; isFinal: 1; labelLinePos: -001; | 05 00 00 00                                       | add
0042 | #1 | commandNum: 0020; isFinal: 1; labelLinePos: 0004; | 14 01 00 00                                       | call fib
0043 | #1 | commandNum: 0000; isFinal: 1; labelLinePos: -001; |                                                   | 
0044 | #1 | commandNum: 0005; isFinal: 1; labelLinePos: -001; | 05 00 00 00                                       | add
0045 | #1 | commandNum: 0021; isFinal: 1; labelLinePos: -001; | 15 00 00 00                                       | ret
0046 | #1 | commandNum: 0000; isFinal: 1; labelLinePos: -001; |                                                   | 
0047 | #1 | commandNum: 0019; isFinal: 1; labelLinePos: 0047; |                                                   | main:
0048 | #1 | commandNum: 0000; isFinal: 1; labelLinePos: -001; |                                                   | 
0049 | #1 | commandNum: 0020; isFinal: 1; labelLinePos: 0004; | 14 01 00 00                                       | call fib
0050 | #1 | commandNum: 0000; isFinal: 1; labelLinePos: -001; |                                                   | 
0051 | #1 | commandNum: 0003; isFinal: 1; labelLinePos: -001; | 03 00 00 00                                       | out
0052 | #1 | commandNum: 0001; isFinal: 1; labelLinePos: -001; | 01 00 00 00                                       | hlt


File listing Pass #2: Intermediate Representation -> Machine Code

000 | #2 | 00000 | 02 00 00 00                                       | in
001 | #2 | 00004 |                                                   | 
002 | #2 | 00004 | 0a 01 00 00 ff ff ff ff                           | jmp main
003 | #2 | 0000c |                                                   | 
004 | #2 | 0000c |                                                   | fib:
005 | #2 | 0000c |                                                   | 
006 | #2 | 0000c | 09 02 00 00 64 00 00 00                           | pop bx
007 | #2 | 00014 | 04 02 00 00 64 00 00 00                           | push bx
008 | #2 | 0001c | 04 02 00 00 64 00 00 00                           | push bx
009 | #2 | 00024 | 04 01 00 00 00 00 00 00                           | push 0
010 | #2 | 0002c | 0b 01 00 00 ff ff ff ff                           | ja checkRet1
011 | #2 | 00034 | 09 02 00 00 64 00 00 00                           | pop bx
012 | #2 | 0003c | 04 01 00 00 00 00 00 00                           | push 0
013 | #2 | 00044 | 15 00 00 00                                       | ret
014 | #2 | 00048 |                                                   | 
015 | #2 | 00048 |                                                   | checkRet1:
016 | #2 | 00048 | 09 02 00 00 64 00 00 00                           | pop bx
017 | #2 | 00050 | 04 02 00 00 64 00 00 00                           | push bx
018 | #2 | 00058 | 04 02 00 00 64 00 00 00                           | push bx
019 | #2 | 00060 | 04 01 00 00 64 00 00 00                           | push 1
020 | #2 | 00068 | 10 01 00 00 ff ff ff ff                           | jne prev
021 | #2 | 00070 |                                                   | ret1:
022 | #2 | 00070 | 09 02 00 00 64 00 00 00                           | pop bx
023 | #2 | 00078 | 04 01 00 00 64 00 00 00                           | push 1
024 | #2 | 00080 | 15 00 00 00                                       | ret
025 | #2 | 00084 |                                                   | 
026 | #2 | 00084 |                                                   | prev:
027 | #2 | 00084 |                                                   | 
028 | #2 | 00084 | 09 02 00 00 64 00 00 00                           | pop bx
029 | #2 | 0008c | 04 02 00 00 64 00 00 00                           | push bx
030 | #2 | 00094 | 04 02 00 00 64 00 00 00                           | push bx
031 | #2 | 0009c | 04 01 00 00 9c ff ff ff                           | push -1
032 | #2 | 000a4 | 05 00 00 00                                       | add
033 | #2 | 000a8 | 14 01 00 00 b0 04 00 00                           | call fib
034 | #2 | 000b0 |                                                   | 
035 | #2 | 000b0 | 09 02 00 00 c8 00 00 00                           | pop cx
036 | #2 | 000b8 | 09 02 00 00 64 00 00 00                           | pop bx
037 | #2 | 000c0 | 04 02 00 00 c8 00 00 00                           | push cx
038 | #2 | 000c8 |                                                   | 
039 | #2 | 000c8 | 04 02 00 00 64 00 00 00                           | push bx
040 | #2 | 000d0 | 04 01 00 00 38 ff ff ff                           | push -2
041 | #2 | 000d8 | 05 00 00 00                                       | add
042 | #2 | 000dc | 14 01 00 00 b0 04 00 00                           | call fib
043 | #2 | 000e4 |                                                   | 
044 | #2 | 000e4 | 05 00 00 00                                       | add
045 | #2 | 000e8 | 15 00 00 00                                       | ret
046 | #2 | 000ec |                                                   | 
047 | #2 | 000ec |                                                   | main:
048 | #2 | 000ec |                                                   | 
049 | #2 | 000ec | 14 01 00 00 b0 04 00 00                           | call fib
050 | #2 | 000f4 |                                                   | 
051 | #2 | 000f4 | 03 00 00 00                                       | out
052 | #2 | 000f8 | 01 00 00 00                                       | hlt


File listing Pass #3: Final Machine Code

000 | #3 | 00000 | 02 00 00 00                                       | in
001 | #3 | 00004 |                                                   | 
002 | #3 | 00004 | 0a 01 00 00 30 5c 00 00                           | jmp main
003 | #3 | 0000c |                                                   | 
004 | #3 | 0000c |                                                   | fib:
005 | #3 | 0000c |                                                   | 
006 | #3 | 0000c | 09 02 00 00 64 00 00 00                           | pop bx
007 | #3 | 00014 | 04 02 00 00 64 00 00 00                           | push bx
008 | #3 | 0001c | 04 02 00 00 64 00 00 00                           | push bx
009 | #3 | 00024 | 04 01 00 00 00 00 00 00                           | push 0
010 | #3 | 0002c | 0b 01 00 00 20 1c 00 00                           | ja checkRet1
011 | #3 | 00034 | 09 02 00 00 64 00 00 00                           | pop bx
012 | #3 | 0003c | 04 01 00 00 00 00 00 00                           | push 0
013 | #3 | 00044 | 15 00 00 00                                       | ret
014 | #3 | 00048 |                                                   | 
015 | #3 | 00048 |                                                   | checkRet1:
016 | #3 | 00048 | 09 02 00 00 64 00 00 00                           | pop bx
017 | #3 | 00050 | 04 02 00 00 64 00 00 00                           | push bx
018 | #3 | 00058 | 04 02 00 00 64 00 00 00                           | push bx
019 | #3 | 00060 | 04 01 00 00 64 00 00 00                           | push 1
020 | #3 | 00068 | 10 01 00 00 90 33 00 00                           | jne prev
021 | #3 | 00070 |                                                   | ret1:
022 | #3 | 00070 | 09 02 00 00 64 00 00 00                           | pop bx
023 | #3 | 00078 | 04 01 00 00 64 00 00 00                           | push 1
024 | #3 | 00080 | 15 00 00 00                                       | ret
025 | #3 | 00084 |                                                   | 
026 | #3 | 00084 |                                                   | prev:
027 | #3 | 00084 |                                                   | 
028 | #3 | 00084 | 09 02 00 00 64 00 00 00                           | pop bx
029 | #3 | 0008c | 04 02 00 00 64 00 00 00                           | push bx
030 | #3 | 00094 | 04 02 00 00 64 00 00 00                           | push bx
031 | #3 | 0009c | 04 01 00 00 9c ff ff ff                           | push -1
032 | #3 | 000a4 | 05 00 00 00                                       | add
033 | #3 | 000a8 | 14 01 00 00 b0 04 00 00                           | call fib
034 | #3 | 000b0 |                                                   | 
035 | #3 | 000b0 | 09 02 00 00 c8 00 00 00                           | pop cx
036 | #3 | 000b8 | 09 02 00 00 64 00 00 00                           | pop bx
037 | #3 | 000c0 | 04 02 00 00 c8 00 00 00                           | push cx
038 | #3 | 000c8 |                                                   | 
039 | #3 | 000c8 | 04 02 00 00 64 00 00 00                           | push bx
040 | #3 | 000d0 | 04 01 00 00 38 ff ff ff                           | push -2
041 | #3 | 000d8 | 05 00 00 00                                       | add
042 | #3 | 000dc | 14 01 00 00 b0 04 00 00                           | call fib
043 | #3 | 000e4 |                                                   | 
044 | #3 | 000e4 | 05 00 00 00                                       | add
045 | #3 | 000e8 | 15 00 00 00                                       | ret
046 | #3 | 000ec |                                                   | 
047 | #3 | 000ec |                                                   | main:
048 | #3 | 000ec |                                                   | 
049 | #3 | 000ec | 14 01 00 00 b0 04 00 00                           | call fib
050 | #3 | 000f4 |                                                   | 
051 | #3 | 000f4 | 03 00 00 00                                       | out
052 | #3 | 000f8 | 01 00 00 00                                       | hlt
